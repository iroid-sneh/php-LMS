<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Employee Login - Leave Management System</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
            rel="stylesheet"
        />
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
            rel="stylesheet"
        />
        <link href="css/style.css" rel="stylesheet" />
    </head>
    <body class="auth-body">
        <div class="container">
            <div class="row justify-content-center min-vh-100 align-items-center">
                <div class="col-md-6 col-lg-4">
                    <div class="card shadow-lg border-0">
                        <div class="card-body p-5">
                            <div class="text-center mb-4">
                                <i class="fas fa-calendar-alt text-primary display-4 mb-3"></i>
                                <h2 class="fw-bold">Employee Login</h2>
                                <p class="text-muted">Sign in to your account</p>
                            </div>

                            <div id="alertContainer"></div>

                            <form id="loginForm">
                                <div class="mb-3">
                                    <label for="email" class="form-label">Email Address</label>
                                    <div class="input-group">
                                        <span class="input-group-text">
                                            <i class="fas fa-envelope"></i>
                                        </span>
                                        <input
                                            type="email"
                                            class="form-control"
                                            id="email"
                                            name="email"
                                            required
                                        />
                                    </div>
                                </div>

                                <div class="mb-4">
                                    <label for="password" class="form-label">Password</label>
                                    <div class="input-group">
                                        <span class="input-group-text">
                                            <i class="fas fa-lock"></i>
                                        </span>
                                        <input
                                            type="password"
                                            class="form-control"
                                            id="password"
                                            name="password"
                                            required
                                        />
                                    </div>
                                </div>

                                <button
                                    type="submit"
                                    class="btn btn-primary w-100 mb-3"
                                    id="loginBtn"
                                >
                                    <i class="fas fa-sign-in-alt me-2"></i>
                                    <span class="btn-text">Login</span>
                                </button>
                            </form>

                            <div class="text-center">
                                <p class="mb-2">
                                    Don't have an account?
                                    <a href="register.html" class="text-decoration-none">
                                        Register here
                                    </a>
                                </p>
                                <p class="mb-0">
                                    <a href="admin-login.html" class="text-decoration-none">
                                        <i class="fas fa-user-shield me-1"></i>
                                        HR Admin Login
                                    </a>
                                </p>
                                <p class="mt-3">
                                    <a href="index.html" class="text-decoration-none">
                                        <i class="fas fa-home me-1"></i>
                                        Back to Home
                                    </a>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <script src="js/auth.js"></script>
        <script>
            document.getElementById("loginForm").addEventListener("submit", function (e) {
                e.preventDefault();

                const email = document.getElementById("email").value;
                const password = document.getElementById("password").value;
                const loginBtn = document.getElementById("loginBtn");
                const btnText = loginBtn.querySelector(".btn-text");

                // Show loading state
                loginBtn.disabled = true;
                btnText.textContent = "Logging in...";

                // Call login function
                login(email, password)
                    .then((response) => {
                        if (response.user.role === "hr") {
                            window.location.href = "admin-dashboard.html";
                        } else {
                            window.location.href = "dashboard.html";
                        }
                    })
                    .catch((error) => {
                        showAlert("error", error.message);
                    })
                    .finally(() => {
                        loginBtn.disabled = false;
                        btnText.textContent = "Login";
                    });
            });
        </script>
    </body>
</html>
